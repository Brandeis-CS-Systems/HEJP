<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
    google.charts.load("current", {packages:["corechart"]});
    google.charts.setOnLoadCallback(drawbar1Chart);
    google.charts.setOnLoadCallback(drawbar2Chart);

    function drawbar1Chart() {
      var data = google.visualization.arrayToDataTable([
        ['Year', 'Faculty', 'Nonfaculty', { role: 'annotation' } ],
        ['{{requestedYears[1]}}', {{institution_1_df[1][1]}}, {{institution_1_df[1][0]}}, ''],
        ['{{requestedYears[0]}}', {{institution_1_df[0][1]}}, {{institution_1_df[0][0]}},'']
      ]);

      var view = new google.visualization.DataView(data);
      view.setColumns([0, 1,
                       { calc: "stringify",
                         sourceColumn: 1,
                         type: "string",
                         role: "annotation" },
                       2, { calc: "stringify",
                         sourceColumn: 2,
                         type: "string",
                         role: "annotation" }
                       ]);

     var options_fullStacked = {
         title: 'Share of Faculty vs. Nonfaculty for {{requestedInstitution[0]}} in {{requestedYears[0]}} - {{requestedYears[1]}}',
         isStacked: 'percent',
         height: 300,
         legend: {position: 'top', maxLines: 3},
         hAxis: {
           minValue: 0,
           ticks: [0, .2, .4, .6, .8, 1]
         }
       };

      var chart = new google.visualization.BarChart(document.getElementById("barchart_values"));
      chart.draw(view,options_fullStacked);
    }

      function drawbar2Chart() {
        var data = google.visualization.arrayToDataTable([
          ['Year', 'Faculty', 'Nonfaculty', { role: 'annotation' } ],
          ['{{requestedYears[1]}}', {{institution_2_df[1][1]}}, {{institution_2_df[1][0]}}, ''],
          ['{{requestedYears[0]}}', {{institution_2_df[0][1]}}, {{institution_2_df[0][0]}},'']
        ]);

        var view = new google.visualization.DataView(data);
        view.setColumns([0, 1,
                         { calc: "stringify",
                           sourceColumn: 1,
                           type: "string",
                           role: "annotation" },
                         2, { calc: "stringify",
                           sourceColumn: 2,
                           type: "string",
                           role: "annotation" }
                         ]);

       var options_fullStacked = {
           title: 'Share of Faculty vs. Nonfaculty for {{requestedInstitution[1]}} in {{requestedYears[0]}} - {{requestedYears[1]}}',
           isStacked: 'percent',
           height: 300,
           legend: {position: 'top', maxLines: 3},
           hAxis: {
             minValue: 0,
             ticks: [0, .2, .4, .6, .8, 1]
           }
         };
        var chart = new google.visualization.BarChart(document.getElementById("barchart2_values"));
        chart.draw(view,options_fullStacked);
      }
</script>


<body>
  <div class="jumbotron">
    <h1 class="display-4">Share of faculty vs. nonfaculty</h1>
  </div>
  <div id="barchart_values" style="width: 900px; height: 300px;"></div>
  <div id="barchart2_values" style="width: 900px; height: 300px;"></div>
  <p> * Note: Data includes both Heath Care including Nursing Non-Faculty postings and Health Sciences Faculty postings </p>

</body>
</html>
