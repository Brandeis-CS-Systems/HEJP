
<!DOCTYPE html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <style>
  form{
    margin-left: 20px;
    margin-top: 20px;
  }
  </style>

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
  <!-- <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@0.5.0"></script> -->
</head>

<body>
  <div class="jumbotron">
    <h1 class="display-4">Share of faculty vs. nonfaculty</h1>
  </div>

  <div id="container" style="width: 60%;">
    <canvas id="bargraph1"></canvas>
    <canvas id="bargraph2"></canvas>
    <p> * Note: Data includes both Heath Care including Nursing Non-Faculty postings and Health Sciences Faculty postings </p>
  </div>


  <script>

    var bargraph1Data = {
      labels: {{requestedYears|safe}},
      datasets: [
      {
        label: 'faculty',
        backgroundColor: 'rgb(255, 255, 132)',
        borderColor: 'rgb(255, 255, 132)',
        borderWidth: 1,
        data: [{{institution_1_df[0][1]}}, {{institution_1_df[1][1]}}],
        stack: "Stack 0"
      },
      {
        label: 'nonfaculty',
        backgroundColor: 'rgb(255, 100, 132)',
        borderColor: 'rgb(255, 100, 132)',
        data: [{{institution_1_df[0][0]}}, {{institution_1_df[1][0]}}],
        stack: "Stack 0"
      }]
    };
    var bargraph2Data = {
      labels: {{requestedYears|safe}},
      datasets: [
      {
        label: 'faculty',
        backgroundColor: 'rgb(255, 255, 132)',
        borderColor: 'rgb(255, 255, 132)',
        borderWidth: 1,
        data: [{{institution_2_df[0][1]}},{{institution_2_df[1][1]}}],
        stack: "Stack 1"
      },
      {
        label: 'nonfaculty',
        backgroundColor: 'rgb(255, 100, 132)',
        borderColor: 'rgb(255, 100, 132)',
        data: [{{institution_2_df[0][0]}},{{institution_2_df[1][0]}}],
        stack: "Stack 1"
      }]
    };
    window.onload = function() {
      window.myHorizontalBar = new Chart(document.getElementById('bargraph1'), {
        type: 'bar',
        data: bargraph1Data,
        options: {
          plugins: {
            stacked100: { enable: true }
          },
          elements: {
            rectangle: {
              borderWidth: 2,
            }
          },
          responsive: true,
          legend: {
            position: 'right',
          },
          title: {
            display: true,
            text: '{{requestedInstitution[0] | safe}}'
          }
        }
      });

      window.myHorizontalBar = new Chart(document.getElementById('bargraph2'), {
        type: 'bar',
        data: bargraph2Data,
        options: {
          plugins: {
            stacked100: { enable: true }
          },
          elements: {
            rectangle: {
              borderWidth: 2,
            }
          },
          responsive: true,
          legend: {
            position: 'right',
          },
          title: {
            display: true,
            text: '{{requestedInstitution[1] | safe}}'
          }
         }
      });
  };
  </script>

    <form method = "post" action = "/faculty" >
      <div class="form-group">
        <h4>Institution Type</h4>
        {% for item in institutionType %}
            <input type="checkbox" name="institutionType" value="{{item}}">
            <label>{{item}}</label><br>
        {% endfor%}
      </div>
        <div class="form-group">
          <h4>Years</h4>
          {% for item in year_range %}
                <input type="checkbox" name="years" value="{{item}}">
                <label>{{item}}</label>
          {% endfor%}
        </div>
        <div class="form-group">
        <button type="submit" class="btn btn-info">Generate Query</button>
        </div>
      </form>

    </html>
  </body>
</html>
